(this.webpackJsonpjsplot=this.webpackJsonpjsplot||[]).push([[0],{14:function(e,t,n){e.exports=n(27)},19:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),i=(n(19),n(2)),l=n(6),u=n(1),s=n(10),h=n(11),d=n(12),f=n(13),v=n(7),m=n.n(v);n(20),n(21);n(22);var p=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){e.props.onChange&&e.props.onChange(t.getValue())},e.handleKeyDown=function(t,n){e.props.onKeyDown&&e.props.onKeyDown(n)},e.container=null,e.codeMirror=void 0,e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){if(this.container){var e=m()(this.container,Object(l.a)({value:this.props.value||""},this.props.options));e.on("change",this.handleChange),e.on("keydown",this.handleKeyDown),this.codeMirror=e}}},{key:"componentWillReceiveProps",value:function(e){var t=e.value||"";this.codeMirror&&this.codeMirror.getValue()!==t&&this.codeMirror.setValue(t)}},{key:"shouldComponentUpdate",value:function(e){return e.className!==this.props.className}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:this.props.className,ref:function(t){return e.container=t}})}}]),n}(a.Component),g=(n(23),n(24),n(3)),b=n.n(g);function w(e,t,n){return"hsl(".concat(function(e){for(var t=0,n=0;n<e.length;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}(e)%360,", ").concat(100*t,"%, ").concat(100*n,"%)")}function y(e,t,n){return Math.min(Math.max(e,t),n)}function E(e,t,n,a,r){return a+(e-t)/(n-t)*(r-a)}function j(e,t){if(t){var n=Math.floor(t[0]*e.length),a=Math.ceil(t[1]*e.length);return{data:e.slice(n,a),start:n,end:a}}return{data:e,start:0,end:e.length}}function M(e,t,n,a){var r,o,c,i=j(n.data,a).data;if(0!==i.length){var l=null!==(r=n.yMin)&&void 0!==r?r:i.reduce((function(e,t){return Math.min(e,t)})),s=(null!==(o=n.yMax)&&void 0!==o?o:i.reduce((function(e,t){return Math.max(e,t)})))-l,h=function(t,n){return[e.width*t/(i.length-1),e.height-e.height*(n-l)/s]};t.beginPath(),t.moveTo.apply(t,Object(u.a)(h(0,i[0]))),t.strokeStyle=null!==(c=n.color)&&void 0!==c?c:w(n.label,.5,.5);for(var d=1;d<i.length;d++)t.lineTo.apply(t,Object(u.a)(h(d,i[d])));t.stroke()}}function O(e){var t=e.lines,n=e.title,r=a.createRef(),o=a.createRef(),c=a.useState([]),l=Object(i.a)(c,2),s=l[0],h=l[1],d=a.useState([]),f=Object(i.a)(d,2),v=f[0],m=f[1],p=a.useState(),g=Object(i.a)(p,2),O=g[0],k=g[1],C=a.useCallback(b.a.throttle(k,16),[k]),N=a.useState(),P=Object(i.a)(N,2),S=P[0],D=P[1];a.useEffect((function(){if(r.current){var e=r.current.getContext("2d");e.clearRect(0,0,r.current.width,r.current.height);for(var n=0;n<t.length;n++)!0!==v[n]&&M(r.current,e,t[n],b.a.last(s))}}),[t,s,v]),a.useEffect((function(){if(o.current){var e=o.current.getContext("2d");e.clearRect(0,0,o.current.width,o.current.height),void 0!==O&&(e.beginPath(),e.strokeStyle="rgba(255, 255, 255, 0.3)",e.moveTo(O*o.current.width,0),e.lineTo(O*o.current.width,o.current.height),e.stroke()),S&&(e.fillStyle="rgba(255, 255, 255, 0.1)",e.fillRect(S[0]*o.current.width,0,(S[1]-S[0])*o.current.width,o.current.height))}}),[O,S]);var R=600,x=250;return a.createElement("div",{className:"Plot"},n&&a.createElement("b",null,n),a.createElement("div",{className:"PlotCanvases"},a.createElement("canvas",{className:"PlotDataCanvas",width:R,height:x,ref:r}),a.createElement("canvas",{className:"PlotUICanvas",width:R,height:x,ref:o,onMouseMove:function(e){var t=e.target.getBoundingClientRect();C((e.clientX-t.left)/t.width)},onMouseOut:function(e){return C(void 0)},onMouseDown:function(e){var t=e.target.getBoundingClientRect(),n=(e.clientX-t.left)/t.width;D([n,n]);var a=function(e){var a=y((e.clientX-t.left)/t.width,0,1);return a<n?[a,n]:[n,a]},r=function(e){e.preventDefault(),e.stopPropagation(),D(a(e))};document.addEventListener("mouseup",(function e(t){var n=a(t),o=b.a.last(s);h(o?[].concat(Object(u.a)(s),[[E(n[0],0,1,o[0],o[1]),E(n[1],0,1,o[0],o[1])]]):[n]),D(void 0),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",r)})),document.addEventListener("mousemove",r)}}),s.length>0&&a.createElement("div",{className:"PlotZoomOut",onClick:function(){return h(s.slice(0,s.length-1))}},"Zoom out")),t.map((function(e,t){var n,r=j(e.data,b.a.last(s));return a.createElement("div",{key:t,className:"PlotLegendItem",style:{color:null!==(n=e.color)&&void 0!==n?n:w(e.label,.5,.5),opacity:v[t]?.5:void 0},onClick:function(){return m(function(e,t,n){var a=Object(u.a)(e);return a[t]=n,a}(v,t,!v[t]))}},e.label,"\xa0",void 0!==O?a.createElement("span",null,Math.round(O*r.data.length),": ",r.data[Math.round(O*r.data.length)]):a.createElement("span",null,"[",r.start,":",r.data[0],", ..., ",r.end-1,":",b.a.last(r.data),"]"))})))}var k=function(){var e=r.a.useState([{data:[3,1,2],label:"Data"}]),t=Object(i.a)(e,2),n=t[0],a=t[1],o=r.a.useState("return [3, 1, 2];"),c=Object(i.a)(o,2),s=c[0],h=c[1],d=r.a.useState(""),f=Object(i.a)(d,2),v=f[0],m=f[1];return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Left"},r.a.createElement(p,{value:s,onChange:function(e){var t;h(e);try{t=Function(e)()}catch(n){return void m(n.message)}m(""),a(function e(t){if(!t)return[];if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("number"!==typeof t[n])return[];return[{data:t,label:"Data"}]}if("object"===typeof t){for(var a=[],r=function(){var n=c[o];a=[].concat(Object(u.a)(a),Object(u.a)(e(t[n]).map((function(e){return Object(l.a)({},e,{label:n})}))))},o=0,c=Object.keys(t);o<c.length;o++)r();return a}return[]}(t))},options:{theme:"one-dark",mode:"javascript",lineNumbers:!0}})),r.a.createElement("div",{className:"Right"},r.a.createElement(O,{lines:n}),r.a.createElement("div",{className:"Error"},v)),r.a.createElement("div",{className:"Header"},"jsplot by ",r.a.createElement("a",{href:"https://twitter.com/jfnoren"},"@jfnoren"),". Code on ",r.a.createElement("a",{href:"https://github.com/FredrikNoren/jsplot"},"GitHub"),". Find it useful? ",r.a.createElement("a",{href:"https://www.patreon.com/fredriknoren"},"Become a Patron!")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.7921a9c2.chunk.js.map